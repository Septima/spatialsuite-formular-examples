<?xml version="1.0" encoding="UTF-8"?>
<datasources>
    <endpoint endpointtype="postgis" name="mailsender">
        <connect>[module.formular-config.connection]</connect>
        <user>[module.formular-config.user]</user>
        <pwd>[module.formular-config.pwd]</pwd>
        <srid>25832</srid>
        <table geometrycolumn="the_geom" pkcolumn="ogc_fid"/>
    </endpoint>
    <datasource displayname="MiljÃ¸tilsyn" endpoint="selvbetjening" name="ds_formular_miljoetilsyn">
        <table geometrycolumn="wkb_geometry" name="formular_miljoetilsyn" pkcolumn="ogc_fid"/>
		<sql command="write">INSERT INTO formular_miljoetilsyn 
								(
								formular,
								ref,
								journalnr,
								sbsys_brugerid,
								sagsbehandler_mail,
								sagsbehandler_tlf,
								address,
								konflikttekst1,
								konflikttekst2,
								dato_tilsyn,
								tilsyn_udfoert_af,
								cvr_nummer,
								p_nummer,
								virksomhed,
								virksomhed_adresse,
								virksomhed_postnr_by,
								virksomhed_tlf,
								virksomhed_deltager,
								virksomhed_mail,
								virksomhedstype,
								mekanisk_reparation,
								pladearbejde,
								serviceeftersyn,
								klargoering,
								koeb_salg_biler,
								lakering,
								undervognsbehandling,
								montage,
								valsning,
								bukning,
								tig_svejsening,
								mig_mag_svejsning,
								opskaering,
								spaandtagning,
								bemaerkning_andre_virksomheder,
								opstartsdato,
								udvidelse_aendringer,
								produktionsareal,
								bemaerkning_produktionsareal,
								antal_ansatte,
								driftstid,
								produktionsforhold,
								stoej_viberationer,
								stoej_viberationer_tekst1,
								stoej_viberationer_tekst2,
								stoej_viberationer_tekst3,
								stoej_viberationer_bemaerkning,
								stoej_viberationer_foto,
								luftemission,
								luftemission_tekst1,
								luftemission_bemaerkning,
								luftemission_foto,
								spildevand,
								spildevand_tekst1,
								spildevand_tekst2,
								spildevand_tekst3,
								spildevand_bemaerkning,
								spildevand_foto,
								raavarer_oplag,
								raavarer_oplag_tekst1,
								raavarer_oplag_bemaerkning,
								raavarer_oplag_foto,
								tanke,
								tank1_aarstal,
								tank1_placering,
								tank1_indhold,
								tank1_stoerrelse,
								tank1_fabrikationsnr,								
								tank2_aarstal,
								tank2_placering,
								tank2_indhold,
								tank2_stoerrelse,
								tank2_fabrikationsnr,								
								tank3_aarstal,
								tank3_placering,
								tank3_indhold,
								tank3_stoerrelse,
								tank3_fabrikationsnr,								
								tank4_aarstal,
								tank4_placering,
								tank4_indhold,
								tank4_stoerrelse,
								tank4_fabrikationsnr,								
								tank5_aarstal,
								tank5_placering,
								tank5_indhold,
								tank5_stoerrelse,
								tank5_fabrikationsnr,								
								tanke_bemaerkning,
								tanke_foto,
								affald,
								affald_batterier,
								affald_savsmuld,
								affald_spildolie,
								affald_blyakkumulatorer,
								affald_koelervaeske,
								affald_bremsevaeske,
								affald_oliefiltre,
								affald_bremsevaskevand,
								affald_tomme_spraydaaser,
								affald_lysstofroer,
								farligt_affald_tekst1,
								farligt_affald_tekst2,
								farligt_affald_tekst3,
								farligt_affald_tekst4,
								farligt_affald_bemaerkning,
								farligt_affald_foto,
								affald_braendbart,
								affald_dagrenovation,
								affald_papir_pap,
								affald_metal,
								affald_daek,
								affald_isolering,
								affald_beton,
								affald_tekst1,
								affald_tekst2,
								affald_tekst3,
								affald_tekst4,
								affald_bemaerkning,
								affald_foto,
								andre_miljoeforhold,
								luftafkast1_proces,
								luftafkast1_rensning,
								luftafkast1_hoejde,
								luftafkast2_proces,
								luftafkast2_rensning,
								luftafkast2_hoejde,
								luftafkast3_proces,
								luftafkast3_rensning,
								luftafkast3_hoejde,
								luftafkast4_proces,
								luftafkast4_rensning,
								luftafkast4_hoejde,
								luftafkast5_proces,
								luftafkast5_rensning,
								luftafkast5_hoejde,
								luftafkast6_proces,
								luftafkast6_rensning,
								luftafkast6_hoejde,
								luftafkast7_proces,
								luftafkast7_rensning,
								luftafkast7_hoejde,
								luftafkast8_proces,
								luftafkast8_rensning,
								luftafkast8_hoejde,
								luftafkast9_proces,
								luftafkast9_rensning,
								luftafkast9_hoejde,
								luftafkast10_proces,
								luftafkast10_rensning,
								luftafkast10_hoejde,
								andre_miljoeforhold_bem,
								andre_miljoeforhold_foto,
								opvarmningsmiddel,
								opvarmningsmiddel_andet,
								reguleringsgrundlag_tekst1,
								reguleringsgrundlag_tekst2,
								reguleringsgrundlag_tekst3,
								reguleringsgrundlag_tekst4,
								reguleringsgrundlag_tekst5,
								reguleringsgrundlag_tekst6,
								reguleringsgrundlag_tekst7,
								dato_miljoegodkendelse,
								reguleringsgrundlag_tekst8,
								dato_spildevandstilladelse,
								reguleringsgrundlag_tekst9,
								reguleringsgrundlag_tekst10,
								miljoemaessige_bemaerkninger,
								miljoemaessige_bem_tekst,
								jordforurening_bemaerkninger,
								jordforurening_bem_tekst,
								haandhaevelser,
								haandhaevelser_tekst,
								oevrige_bemaerkninger,
								dato,
								wkb_geometry
								) 
								VALUES
								(
								[string: formular],
								[string: sessionid],
								[string: if IsDefined(journalnr) then journalnr else "" endif],
								[string: if IsDefined(sbsys_brugerid) then sbsys_brugerid else "" endif],
								[string: if IsDefined(sagsbehandler_mail) then sagsbehandler_mail else "" endif],
								[number: if IsDefined(sagsbehandler_tlf) then toNumber(sagsbehandler_tlf) else 0 endif],
								[string: if IsDefined(address) then address else "" endif],
								[string: if IsDefined(konflikttekst1) then konflikttekst1 else "" endif],
								[string: if IsDefined(konflikttekst2) then konflikttekst2 else "" endif],
								[string: if IsDefined(dato_tilsyn) then dato_tilsyn else "" endif],
								[string: if IsDefined(tilsyn_udfoert_af) then tilsyn_udfoert_af else "" endif],
								[number: if IsDefined(cvr_nummer) then toNumber(cvr_nummer) else 0 endif],
								[number: if IsDefined(p_nummer) then toNumber(p_nummer) else 0 endif],
								[string: if IsDefined(virksomhed) then virksomhed else "" endif],
								[string: if IsDefined(virksomhed_adresse) then virksomhed_adresse else "" endif],
								[string: if IsDefined(virksomhed_postnr_by) then virksomhed_postnr_by else "" endif],
								[string: if IsDefined(virksomhed_tlf) then virksomhed_tlf else "" endif],
								[string: if IsDefined(virksomhed_deltager) then virksomhed_deltager else "" endif],
								[string: if IsDefined(virksomhed_mail) then virksomhed_mail else "" endif],
								[string: if IsDefined(virksomhedstype) then virksomhedstype else "" endif],
								[string: if IsDefined(mekanisk_reparation) then mekanisk_reparation else "" endif],
								[string: if IsDefined(pladearbejde) then pladearbejde else "" endif],
								[string: if IsDefined(serviceeftersyn) then serviceeftersyn else "" endif],
								[string: if IsDefined(klargoering) then klargoering else "" endif],
								[string: if IsDefined(koeb_salg_biler) then koeb_salg_biler else "" endif],
								[string: if IsDefined(lakering) then lakering else "" endif],
								[string: if IsDefined(undervognsbehandling) then undervognsbehandling else "" endif],
								[string: if IsDefined(montage) then montage else "" endif],
								[string: if IsDefined(valsning) then valsning else "" endif],
								[string: if IsDefined(bukning) then bukning else "" endif],
								[string: if IsDefined(tig_svejsening) then tig_svejsening else "" endif],
								[string: if IsDefined(mig_mag_svejsning) then mig_mag_svejsning else "" endif],
								[string: if IsDefined(opskaering) then opskaering else "" endif],
								[string: if IsDefined(spaandtagning) then spaandtagning else "" endif],
								[string: if IsDefined(bemaerkning_andre_virksomheder) then bemaerkning_andre_virksomheder else "" endif],
								[string: if IsDefined(opstartsdato) then opstartsdato else "" endif],
								[string: if IsDefined(udvidelse_aendringer) then udvidelse_aendringer else "" endif],
								[number: if IsDefined(produktionsareal) then toNumber(produktionsareal) else 0 endif],
								[string: if IsDefined(bemaerkning_produktionsareal) then bemaerkning_produktionsareal else "" endif],
								[number: if IsDefined(antal_ansatte) then toNumber(antal_ansatte) else 0 endif],
								[string: if IsDefined(driftstid) then driftstid else "" endif],
								[string: if IsDefined(produktionsforhold) then produktionsforhold else "" endif],
								[string: if IsDefined(stoej_viberationer) then stoej_viberationer else "" endif],
								[string: if IsDefined(stoej_viberationer_tekst1) then stoej_viberationer_tekst1 else "" endif],
								[string: if IsDefined(stoej_viberationer_tekst2) then stoej_viberationer_tekst2 else "" endif],
								[string: if IsDefined(stoej_viberationer_tekst3) then stoej_viberationer_tekst3 else "" endif],
								[string: if IsDefined(stoej_viberationer_bemaerkning) then stoej_viberationer_bemaerkning else "" endif],
								[string: if IsDefined(stoej_viberationer_foto) then stoej_viberationer_foto else "" endif],
								[string: if IsDefined(luftemission) then luftemission else "" endif],
								[string: if IsDefined(luftemission_tekst1) then luftemission_tekst1 else "" endif],
								[string: if IsDefined(luftemission_bemaerkning) then luftemission_bemaerkning else "" endif],
								[string: if IsDefined(luftemission_foto) then luftemission_foto else "" endif],
								[string: if IsDefined(spildevand) then spildevand else "" endif],
								[string: if IsDefined(spildevand_tekst1) then spildevand_tekst1 else "" endif],
								[string: if IsDefined(spildevand_tekst2) then spildevand_tekst2 else "" endif],
								[string: if IsDefined(spildevand_tekst3) then spildevand_tekst3 else "" endif],
								[string: if IsDefined(spildevand_bemaerkning) then spildevand_bemaerkning else "" endif],
								[string: if IsDefined(spildevand_foto) then spildevand_foto else "" endif],
								[string: if IsDefined(raavarer_oplag) then raavarer_oplag else "" endif],
								[string: if IsDefined(raavarer_oplag_tekst1) then raavarer_oplag_tekst1 else "" endif],
								[string: if IsDefined(raavarer_oplag_bemaerkning) then raavarer_oplag_bemaerkning else "" endif],
								[string: if IsDefined(raavarer_oplag_foto) then raavarer_oplag_foto else "" endif],
								[string: if IsDefined(tanke) then tanke else "" endif],
								[number: if IsDefined(tank1_aarstal) then toNumber(tank1_aarstal) else 0 endif],
								[string: if IsDefined(tank1_placering) then tank1_placering else "" endif],
								[string: if IsDefined(tank1_indhold) then tank1_indhold else "" endif],
								[number: if IsDefined(tank1_stoerrelse) then toNumber(tank1_stoerrelse) else 0 endif],
								[string: if IsDefined(tank1_fabrikationsnr) then tank1_fabrikationsnr else "" endif],							
								[number: if IsDefined(tank2_aarstal) then toNumber(tank2_aarstal) else 0 endif],
								[string: if IsDefined(tank2_placering) then tank2_placering else "" endif],
								[string: if IsDefined(tank2_indhold) then tank2_indhold else "" endif],
								[number: if IsDefined(tank2_stoerrelse) then toNumber(tank2_stoerrelse) else 0 endif],
								[string: if IsDefined(tank2_fabrikationsnr) then tank2_fabrikationsnr else "" endif],							
								[number: if IsDefined(tank3_aarstal) then toNumber(tank3_aarstal) else 0 endif],
								[string: if IsDefined(tank3_placering) then tank3_placering else "" endif],
								[string: if IsDefined(tank3_indhold) then tank3_indhold else "" endif],
								[number: if IsDefined(tank3_stoerrelse) then toNumber(tank3_stoerrelse) else 0 endif],
								[string: if IsDefined(tank3_fabrikationsnr) then tank3_fabrikationsnr else "" endif],							
								[number: if IsDefined(tank4_aarstal) then toNumber(tank4_aarstal) else 0 endif],
								[string: if IsDefined(tank4_placering) then tank4_placering else "" endif],
								[string: if IsDefined(tank4_indhold) then tank4_indhold else "" endif],
								[number: if IsDefined(tank4_stoerrelse) then toNumber(tank4_stoerrelse) else 0 endif],
								[string: if IsDefined(tank4_fabrikationsnr) then tank4_fabrikationsnr else "" endif],							
								[number: if IsDefined(tank5_aarstal) then toNumber(tank5_aarstal) else 0 endif],
								[string: if IsDefined(tank5_placering) then tank5_placering else "" endif],
								[string: if IsDefined(tank5_indhold) then tank5_indhold else "" endif],
								[number: if IsDefined(tank5_stoerrelse) then toNumber(tank5_stoerrelse) else 0 endif],
								[string: if IsDefined(tank5_fabrikationsnr) then tank5_fabrikationsnr else "" endif],							
								[string: if IsDefined(tanke_bemaerkning) then tanke_bemaerkning else "" endif],
								[string: if IsDefined(tanke_foto) then tanke_foto else "" endif],
								[string: if IsDefined(affald) then affald else "" endif],
								[string: if IsDefined(affald_batterier) then affald_batterier else "" endif],
								[string: if IsDefined(affald_savsmuld) then affald_savsmuld else "" endif],
								[string: if IsDefined(affald_spildolie) then affald_spildolie else "" endif],
								[string: if IsDefined(affald_blyakkumulatorer) then affald_blyakkumulatorer else "" endif],
								[string: if IsDefined(affald_koelervaeske) then affald_koelervaeske else "" endif],
								[string: if IsDefined(affald_bremsevaeske) then affald_bremsevaeske else "" endif],
								[string: if IsDefined(affald_oliefiltre) then affald_oliefiltre else "" endif],
								[string: if IsDefined(affald_bremsevaskevand) then affald_bremsevaskevand else "" endif],
								[string: if IsDefined(affald_tomme_spraydaaser) then affald_tomme_spraydaaser else "" endif],
								[string: if IsDefined(affald_lysstofroer) then affald_lysstofroer else "" endif],
								[string: if IsDefined(farligt_affald_tekst1) then farligt_affald_tekst1 else "" endif],
								[string: if IsDefined(farligt_affald_tekst2) then farligt_affald_tekst2 else "" endif],
								[string: if IsDefined(farligt_affald_tekst3) then farligt_affald_tekst3 else "" endif],
								[string: if IsDefined(farligt_affald_tekst4) then farligt_affald_tekst4 else "" endif],
								[string: if IsDefined(farligt_affald_bemaerkning) then farligt_affald_bemaerkning else "" endif],
								[string: if IsDefined(farligt_affald_foto) then farligt_affald_foto else "" endif],
								[string: if IsDefined(affald_braendbart) then affald_braendbart else "" endif],
								[string: if IsDefined(affald_dagrenovation) then affald_dagrenovation else "" endif],
								[string: if IsDefined(affald_papir_pap) then affald_papir_pap else "" endif],
								[string: if IsDefined(affald_metal) then affald_metal else "" endif],
								[string: if IsDefined(affald_daek) then affald_daek else "" endif],
								[string: if IsDefined(affald_isolering) then affald_isolering else "" endif],
								[string: if IsDefined(affald_beton) then affald_beton else "" endif],
								[string: if IsDefined(affald_tekst1) then affald_tekst1 else "" endif],
								[string: if IsDefined(affald_tekst2) then affald_tekst2 else "" endif],
								[string: if IsDefined(affald_tekst3) then affald_tekst3 else "" endif],
								[string: if IsDefined(affald_tekst4) then affald_tekst4 else "" endif],
								[string: if IsDefined(affald_bemaerkning) then affald_bemaerkning else "" endif],
								[string: if IsDefined(affald_foto) then affald_foto else "" endif],
								[string: if IsDefined(andre_miljoeforhold) then andre_miljoeforhold else "" endif],
								[string: if IsDefined(luftafkast1_proces) then luftafkast1_proces else "" endif],
								[string: if IsDefined(luftafkast1_rensning) then luftafkast1_rensning else "" endif],
								[string: if IsDefined(luftafkast1_hoejde) then luftafkast1_hoejde else "" endif],
								[string: if IsDefined(luftafkast2_proces) then luftafkast2_proces else "" endif],
								[string: if IsDefined(luftafkast2_rensning) then luftafkast2_rensning else "" endif],
								[string: if IsDefined(luftafkast2_hoejde) then luftafkast2_hoejde else "" endif],
								[string: if IsDefined(luftafkast3_proces) then luftafkast3_proces else "" endif],
								[string: if IsDefined(luftafkast3_rensning) then luftafkast3_rensning else "" endif],
								[string: if IsDefined(luftafkast3_hoejde) then luftafkast3_hoejde else "" endif],
								[string: if IsDefined(luftafkast4_proces) then luftafkast4_proces else "" endif],
								[string: if IsDefined(luftafkast4_rensning) then luftafkast4_rensning else "" endif],
								[string: if IsDefined(luftafkast4_hoejde) then luftafkast4_hoejde else "" endif],
								[string: if IsDefined(luftafkast5_proces) then luftafkast5_proces else "" endif],
								[string: if IsDefined(luftafkast5_rensning) then luftafkast5_rensning else "" endif],
								[string: if IsDefined(luftafkast5_hoejde) then luftafkast5_hoejde else "" endif],
								[string: if IsDefined(luftafkast6_proces) then luftafkast6_proces else "" endif],
								[string: if IsDefined(luftafkast6_rensning) then luftafkast6_rensning else "" endif],
								[string: if IsDefined(luftafkast6_hoejde) then luftafkast6_hoejde else "" endif],
								[string: if IsDefined(luftafkast7_proces) then luftafkast7_proces else "" endif],
								[string: if IsDefined(luftafkast7_rensning) then luftafkast7_rensning else "" endif],
								[string: if IsDefined(luftafkast7_hoejde) then luftafkast7_hoejde else "" endif],
								[string: if IsDefined(luftafkast8_proces) then luftafkast8_proces else "" endif],
								[string: if IsDefined(luftafkast8_rensning) then luftafkast8_rensning else "" endif],
								[string: if IsDefined(luftafkast8_hoejde) then luftafkast8_hoejde else "" endif],
								[string: if IsDefined(luftafkast9_proces) then luftafkast9_proces else "" endif],
								[string: if IsDefined(luftafkast9_rensning) then luftafkast9_rensning else "" endif],
								[string: if IsDefined(luftafkast9_hoejde) then luftafkast9_hoejde else "" endif],
								[string: if IsDefined(luftafkast10_proces) then luftafkast10_proces else "" endif],
								[string: if IsDefined(luftafkast10_rensning) then luftafkast10_rensning else "" endif],
								[string: if IsDefined(luftafkast10_hoejde) then luftafkast10_hoejde else "" endif],
								[string: if IsDefined(andre_miljoeforhold_bem) then andre_miljoeforhold_bem else "" endif],
								[string: if IsDefined(andre_miljoeforhold_foto) then andre_miljoeforhold_foto else "" endif],
								[string: if IsDefined(opvarmningsmiddel) then opvarmningsmiddel else "" endif],
								[string: if IsDefined(opvarmningsmiddel_andet) then opvarmningsmiddel_andet else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst1) then reguleringsgrundlag_tekst1 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst2) then reguleringsgrundlag_tekst2 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst3) then reguleringsgrundlag_tekst3 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst4) then reguleringsgrundlag_tekst4 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst5) then reguleringsgrundlag_tekst5 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst6) then reguleringsgrundlag_tekst6 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst7) then reguleringsgrundlag_tekst7 else "" endif],
								[string: if IsDefined(dato_miljoegodkendelse) then dato_miljoegodkendelse else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst8) then reguleringsgrundlag_tekst8 else "" endif],
								[string: if IsDefined(dato_spildevandstilladelse) then dato_spildevandstilladelse else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst9) then reguleringsgrundlag_tekst9 else "" endif],
								[string: if IsDefined(reguleringsgrundlag_tekst10) then reguleringsgrundlag_tekst10 else "" endif],
								[string: if IsDefined(miljoemaessige_bemaerkninger) then miljoemaessige_bemaerkninger else "" endif],
								[string: if IsDefined(miljoemaessige_bemaerkninger_tekst) then miljoemaessige_bemaerkninger_tekst else "" endif],
								[string: if IsDefined(jordforurening_bemaerkninger) then jordforurening_bemaerkninger else "" endif],
								[string: if IsDefined(jordforurening_bem_tekst) then jordforurening_bem_tekst else "" endif],
								[string: if IsDefined(haandhaevelser) then haandhaevelser else "" endif],
								[string: if IsDefined(haandhaevelser_tekst) then haandhaevelser_tekst else "" endif],
								[string: if IsDefined(oevrige_bemaerkninger) then oevrige_bemaerkninger else "" endif],
								localtimestamp,
								[geometry: ToGeometry(wkt)]
								)
		</sql>
		<sql command="read-all">select * from formular_miljoetilsyn where ref = [string: nogle]</sql>
    </datasource>
</datasources>
